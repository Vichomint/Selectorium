{% extends "layout_postulante.html" %} {% block title %}Mis Postulaciones
{%endblock %} {% block main_content %}
<h2 class="text-2xl font-bold text-primary-700 mb-6">
  <i class="fas fa-clipboard-list mr-2"></i> Mis Postulaciones
</h2>

{% if postulaciones %}
<div class="space-y-4">
  {% for postulacion in postulaciones %}
  <div class="bg-white shadow rounded-lg p-6">
    <!-- Encabezado -->
    <div class="flex justify-between items-center mb-3">
      <div>
        <h3 class="text-lg font-semibold text-gray-800">
          {{ postulacion.vacante.titulo }}
        </h3>
        <p class="text-sm text-gray-600">{{ postulacion.vacante.ubicacion }}</p>
        <p class="text-xs text-gray-500">
          Postulado el {{ postulacion.fecha_postulacion|date:"d/m/Y H:i" }}
        </p>
      </div>

      <!-- Estado -->
      <span
        class="px-3 py-1 rounded-full text-sm font-bold {% if postulacion.estado == 'enviado' %} bg-yellow-100 text-yellow-700 {% elif postulacion.estado == 'visto' %} bg-blue-100 text-blue-700 {% elif postulacion.estado == 'aceptado' %} bg-green-100 text-green-700 {% elif postulacion.estado == 'rechazado' %} bg-red-100 text-red-700 {% endif %}"
      >
        {{ postulacion.get_estado_display }}
      </span>
    </div>

    <!-- Descripción breve -->
    <p class="text-gray-600 text-sm mb-4 line-clamp-3">
      {{ postulacion.vacante.descripcion|truncatewords:40 }}
    </p>
    {% if postulacion.match_label %}
    <p class="text-sm font-semibold mb-4">
      Match con tu perfil:
      <span class="
        {% if postulacion.match_label == 'Muy apto' %} text-green-700 {%
        elif postulacion.match_label == 'Apto' %} text-emerald-700 {%
        elif postulacion.match_label == 'Poco apto' %} text-yellow-700 {%
        else %} text-gray-600 {% endif %}">
        {{ postulacion.match_label }}
      </span>
    </p>
    {% endif %}

    <!-- Botones -->
    <div class="flex space-x-3">
      <a
        href="{% url 'detalle_vacante' postulacion.vacante.id %}"
        class="btn-primary"
      >
        Ver detalle de vacante
      </a>
      {% if postulacion.estado == "enviado" %}
      <a href="#" class="btn-danger"> Retirar postulación </a>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<p class="text-gray-500">Aún no te has postulado a ninguna vacante.</p>
{% endif %} {% endblock %}
